// Translations
const translations = {
    es: {
        nav_home: "Inicio",
        nav_how: "CÃ³mo Funciona",
        nav_benefits: "Beneficios",
        nav_features: "Funcionalidades",
        nav_team: "Equipo",
        nav_testimonials: "Testimonios",
        nav_faq: "FAQ",
        nav_contact: "Contacto",
        btn_download: "Descargar App",
        hero_title: "CUIDA TU PIEL A TIEMPO, CON CONFIANZA Y PRECISIÃ“N",
        hero_desc: "DermaScan te ayuda a monitorear tu piel de forma simple y confiable, manteniendo un registro de tus resultados y conectÃ¡ndote con especialistas cuando lo necesites.",
        btn_early_access: "Unirme",
        how_title: "Â¿CÃ“MO FUNCIONA?",
        step1_title: "Escanea",
        step1_desc: "Toma una foto de tu piel con nuestra cÃ¡mara inteligente.",
        step2_title: "Analiza",
        step2_desc: "Nuestra IA procesa la imagen en segundos.",
        step3_title: "Recibe",
        step3_desc: "ObtÃ©n un pre-diagnÃ³stico y recomendaciones.",
        benefits_title: "BENEFICIOS DE DERMASCAN",
        benefit1_title: "DetecciÃ³n temprana",
        benefit1_desc: "Identifica posibles anomalÃ­as en tu piel en etapas iniciales, permitiendo un tratamiento oportuno.",
        benefit2_title: "Resultados RÃ¡pidos",
        benefit2_desc: "ObtÃ©n resultados en minutos, sin necesidad de citas mÃ©dicas ni largas esperas.",
        benefit3_title: "Privacidad Garantizada",
        benefit3_desc: "Tus datos e imÃ¡genes se mantienen confidenciales y protegidos en todo momento.",
        features_title: "FUNCIONALIDADES DE DERMASCAN",
        features_subtitle: "DermaScan ofrece una variedad de herramientas para el cuidado de tu piel.",
        feature1_title: "AnÃ¡lisis de lunares",
        feature1_desc: "Examina tus lunares para detectar cambios sospechosos y recibir recomendaciones personalizadas.",
        feature2_title: "Seguimiento de manchas",
        feature2_desc: "Monitorea la evoluciÃ³n de manchas en tu piel a lo largo del tiempo.",
        feature3_title: "Control de acnÃ©",
        feature3_desc: "EvalÃºa la severidad de tu acnÃ© y obtÃ©n consejos para su tratamiento.",
        gallery_title: "Interfaz Intuitiva",

        // TEAM TRANSLATIONS
        team_section_tag: "ACERCA DE NOSOTROS",
        team_main_title: "Nuestro equipo",
        team_desc: "Seis aliados fundamentales que funcionan para el impulso de DermaScan",
        role_software: "IngenierÃ­a de Software",
        role_systems: "IngenierÃ­a de Sistemas",
        avales_title: "Nuestros Avales",
        endorsement_iso: "ISO 27001",
        endorsement_hippa: "HIPPA Compliant",

        // MOBILE SECTION TRANSLATIONS
        mobile_title: "TU NUEVA\nEXPERIENCIA\nMÃ“VIL",
        mobile_desc: "Descubre todo lo que ofrece la nueva herramienta mÃ³vil que ofrece DermaScan.",
        btn_store_sub: "Descarga la aplicaciÃ³n en",

        // COMPARISON TABLE TRANSLATIONS
        comparison_title: "Â¿Por quÃ© DermaScan?",
        comp_feature: "CaracterÃ­stica",
        comp_others: "Otros",
        comp_row1: "AnÃ¡lisis IA",
        comp_row2: "Velocidad",
        comp_row3: "Privacidad",
        comp_days: "DÃ­as",
        comp_encrypted: "Encriptado",
        comp_variable: "Variable",

        derma_title: "Para Profesionales",
        derma_desc: "Optimice su prÃ¡ctica clÃ­nica con nuestras herramientas de triaje y seguimiento.",
        btn_derma: "Soy DermatÃ³logo",

        // TESTIMONIALS TRANSLATIONS
        testimonials_title: "TESTIMONIOS",
        testimonials_subtitle: "Vea que nuestros usuarios dicen de nosotros.",
        test1_name: "SofÃ­a GarcÃ­a",
        test1_time: "hace 2 semanas",
        test1_text: "â€œDermaScan me ayudÃ³ a detectar un lunar sospechoso que resultÃ³ ser un melanoma en etapa temprana. Gracias a la app, pude recibir tratamiento a tiempo y salvar mi vida.â€",
        test2_name: "Carlos Lopez",
        test2_time: "hace 1 mes",
        test2_text: "\"La app es muy fÃ¡cil de usar y los resultados son rÃ¡pidos. Me ha ayudado a controlar mi acnÃ© y mejorar mi piel.\"",
        test3_name: "Ana Martinez",
        test3_time: "hace 3 meses",
        test3_text: "\"DermaScan es una herramienta indispensable para el cuidado de la piel. Me permite monitorear mis manchas y lunares de forma regular y estar tranquila.\"",
        doc_quote: "\"Una herramienta excelente para el triaje dermatolÃ³gico.\"",
        doc_cite: "- Dr. Juan PÃ©rez, DermatÃ³logo Certificado",

        faq_title: "Preguntas Frecuentes",
        faq_q1: "Â¿Es gratuito?",
        faq_a1: "SÃ­, la versiÃ³n bÃ¡sica es gratuita.",
        faq_q2: "Â¿Sustituye al mÃ©dico?",
        faq_a2: "No, es una herramienta de apoyo y monitoreo.",
        faq_q3: "Â¿Mis datos estÃ¡n seguros?",
        faq_a3: "SÃ­, usamos encriptaciÃ³n de grado mÃ©dico.",
        blog_title: "Blog Saludable",
        blog_post1: "5 Tips para el verano",
        blog_post2: "Entendiendo el SPF",
        read_more: "Leer mÃ¡s",
        newsletter_title: "SuscrÃ­bete a nuestro Newsletter",
        btn_subscribe: "Suscribirse",
        contact_title: "CONTÃCTANOS",
        lbl_name: "Nombre Completo:",
        lbl_email: "Email:",
        lbl_message: "Mensaje:",
        btn_send: "Enviar Mensaje",
        link_privacy: "PolÃ­tica de Privacidad",
        link_terms: "TÃ©rminos y Condiciones",

        // FOOTER
        footer_copyright: "&copy; 2025 DermaScan. Todos los derechos reservados."
    },
    en: {
        nav_home: "Home",
        nav_how: "How it Works",
        nav_benefits: "Benefits",
        nav_features: "Features",
        nav_team: "Team",
        nav_testimonials: "Testimonials",
        nav_faq: "FAQ",
        nav_contact: "Contact",
        btn_download: "Download App",
        hero_title: "TAKE CARE OF YOUR SKIN ON TIME, WITH CONFIDENCE AND PRECISION",
        hero_desc: "DermaScan helps you monitor your skin simply and reliably, keeping a record of your results and connecting you with specialists when you need them.",
        btn_early_access: "Join",
        how_title: "HOW IT WORKS?",
        step1_title: "Scan",
        step1_desc: "Take a photo of your skin with our smart camera.",
        step2_title: "Analyze",
        step2_desc: "Our AI processes the image in seconds.",
        step3_title: "Receive",
        step3_desc: "Get a pre-diagnosis and recommendations.",
        benefits_title: "DERMASCAN BENEFITS",
        benefit1_title: "Early Detection",
        benefit1_desc: "Identify possible skin anomalies in early stages, allowing timely treatment.",
        benefit2_title: "Fast Results",
        benefit2_desc: "Get results in minutes, without medical appointments or long waits.",
        benefit3_title: "Guaranteed Privacy",
        benefit3_desc: "Your data and images are kept confidential and protected at all times.",
        features_title: "DERMASCAN FEATURES",
        features_subtitle: "DermaScan offers a variety of tools for your skin care.",
        feature1_title: "Mole Analysis",
        feature1_desc: "Examine your moles to detect suspicious changes and receive personalized recommendations.",
        feature2_title: "Spot Tracking",
        feature2_desc: "Monitor the evolution of spots on your skin over time.",
        feature3_title: "Acne Control",
        feature3_desc: "Assess the severity of your acne and get treatment advice.",
        gallery_title: "Intuitive Interface",

        // TEAM TRANSLATIONS
        team_section_tag: "ABOUT US",
        team_main_title: "Our Team",
        team_desc: "Six fundamental allies working to boost DermaScan",
        role_software: "Software Engineering",
        role_systems: "Systems Engineering",
        avales_title: "Our Endorsements",
        endorsement_iso: "ISO 27001",
        endorsement_hippa: "HIPPA Compliant",

        // MOBILE SECTION TRANSLATIONS
        mobile_title: "YOUR NEW\nMOBILE\nEXPERIENCE",
        mobile_desc: "Discover everything the new mobile tool by DermaScan offers.",
        btn_store_sub: "Download on the",

        // COMPARISON TABLE TRANSLATIONS
        comparison_title: "Why DermaScan?",
        comp_feature: "Feature",
        comp_others: "Others",
        comp_row1: "AI Analysis",
        comp_row2: "Speed",
        comp_row3: "Privacy",
        comp_days: "Days",
        comp_encrypted: "Encrypted",
        comp_variable: "Variable",

        derma_title: "For Professionals",
        derma_desc: "Optimize your clinical practice with our triage and tracking tools.",
        btn_derma: "I am a Dermatologist",

        // TESTIMONIALS TRANSLATIONS
        testimonials_title: "TESTIMONIALS",
        testimonials_subtitle: "See what our users say about us.",
        test1_name: "SofÃ­a GarcÃ­a",
        test1_time: "2 weeks ago",
        test1_text: "â€œDermaScan helped me detect a suspicious mole that turned out to be early-stage melanoma. Thanks to the app, I was able to get treatment on time and save my life.â€",
        test2_name: "Carlos Lopez",
        test2_time: "1 month ago",
        test2_text: "\"The app is very easy to use and the results are fast. It has helped me control my acne and improve my skin.\"",
        test3_name: "Ana Martinez",
        test3_time: "3 months ago",
        test3_text: "\"DermaScan is an indispensable tool for skin care. It allows me to monitor my spots and moles regularly and have peace of mind.\"",
        doc_quote: "\"An excellent tool for dermatological triage.\"",
        doc_cite: "- Dr. Juan PÃ©rez, Certified Dermatologist",

        faq_title: "Frequently Asked Questions",
        faq_q1: "Is it free?",
        faq_a1: "Yes, the basic version is free.",
        faq_q2: "Does it replace a doctor?",
        faq_a2: "No, it is a support and monitoring tool.",
        faq_q3: "Are my data safe?",
        faq_a3: "Yes, we use medical-grade encryption.",
        blog_title: "Healthy Blog",
        blog_post1: "5 Tips for Summer",
        blog_post2: "Understanding SPF",
        read_more: "Read more",
        newsletter_title: "Subscribe to our Newsletter",
        btn_subscribe: "Subscribe",
        contact_title: "CONTACT US",
        lbl_name: "Full Name:",
        lbl_email: "Email:",
        lbl_message: "Message:",
        btn_send: "Send Message",
        link_privacy: "Privacy Policy",
        link_terms: "Terms and Conditions",

        // FOOTER
        footer_copyright: "&copy; 2025 DermaScan. All rights reserved."
    }
};

// State
let currentLang = 'es';
let isDarkMode = false;

// Elements
const langToggle = document.getElementById('lang-toggle');
const themeToggle = document.getElementById('theme-toggle');
const hamburger = document.querySelector('.hamburger');
const navLinks = document.querySelector('.nav-links');
const loader = document.getElementById('loader');
const faqSearch = document.getElementById('faq-search');

// Functions

function updateLanguage() {
    const texts = translations[currentLang];
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (texts[key]) {
            // Check for line breaks
            if (key === 'mobile_title') {
                element.innerHTML = texts[key].replace(/\n/g, '<br>');
            } else if (key === 'footer_copyright') {
                element.innerHTML = texts[key];
            } else {
                element.innerText = texts[key];
            }
        }
    });
    langToggle.innerText = currentLang === 'es' ? 'EN' : 'ES';
}

function toggleLanguage() {
    currentLang = currentLang === 'es' ? 'en' : 'es';
    updateLanguage();
}

function toggleTheme() {
    isDarkMode = !isDarkMode;
    document.body.classList.toggle('dark-mode', isDarkMode);
    themeToggle.innerText = isDarkMode ? 'â˜€ï¸' : 'ðŸŒ™';
    localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
}

function toggleMenu() {
    navLinks.classList.toggle('active');
}

// Event Listeners
langToggle.addEventListener('click', toggleLanguage);
themeToggle.addEventListener('click', toggleTheme);
hamburger.addEventListener('click', toggleMenu);

// FAQ Search
if (faqSearch) {
    faqSearch.addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        document.querySelectorAll('.faq-list details').forEach(detail => {
            const text = detail.innerText.toLowerCase();
            detail.style.display = text.includes(term) ? 'block' : 'none';
        });
    });
}

// Loader
window.addEventListener('load', () => {
    setTimeout(() => {
        loader.style.opacity = '0';
        setTimeout(() => {
            loader.style.display = 'none';
        }, 500);
    }, 1000); // Fake delay for demo

    // Load saved theme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
        isDarkMode = true;
        document.body.classList.add('dark-mode');
        themeToggle.innerText = 'â˜€ï¸';
    }
});

// Smooth Scroll & Active Link
const sections = document.querySelectorAll('section[id]');
const navItems = document.querySelectorAll('.nav-links li a');
const navHeight = 100;

function changeActiveLink() {
    let currentSectionId = '';
    sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (window.scrollY >= sectionTop - navHeight) {
            currentSectionId = section.getAttribute('id');
        }
    });
    navItems.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${currentSectionId}`) {
            link.classList.add('active');
        }
    });
}

window.addEventListener('scroll', changeActiveLink);